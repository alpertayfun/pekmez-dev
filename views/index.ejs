<html>
  <head>
    <title>Pekmez Simple Web Server</title>
    <style>
        @import url(https://fonts.googleapis.com/css?family=Oxygen:400,300);
        @import url(https://fonts.googleapis.com/css?family=Montserrat:700);
        body {
          font-size: 100%;
          font-family: 'Montserrat', sans-serif;
        }
        body {
          background-color: #2F3242;
        }
        svg {
          position: absolute;
          top: 50%;
          left: 50%;
          margin-top: -250px;
          margin-left: -400px;
        }
        .message-box {
          height: 200px;
          width: 380px;
          position: absolute;
          top: 50%;
          left: 50%;
          margin-top: -100px;
          margin-left: 50px;
          color: #FFF;
          font-family: 'Montserrat', sans-serif;
          font-weight: 300;
        }
        .message-box h1 {
          font-size: 60px;
          line-height: 46px;
          margin-bottom: 40px;
        }
        .buttons-con .action-link-wrap {
          margin-top: 40px;
        }
        .buttons-con .action-link-wrap a {
          background: #68c950;
          padding: 8px 25px;
          border-radius: 4px;
          color: #FFF;
          font-weight: bold;
          font-size: 14px;
          transition: all 0.3s linear;
          cursor: pointer;
          text-decoration: none;
          margin-right: 10px
        }
        .buttons-con .action-link-wrap a:hover {
          background: #5A5C6C;
          color: #fff;
        }

        #Polygon-1 , #Polygon-2 , #Polygon-3 , #Polygon-4 , #Polygon-4, #Polygon-5 {
          animation: float 1s infinite ease-in-out alternate;
        }
        #Polygon-2 {
          animation-delay: .2s; 
        }
        #Polygon-3 {
          animation-delay: .4s; 
        }
        #Polygon-4 {
          animation-delay: .6s; 
        }
        #Polygon-5 {
          animation-delay: .8s; 
        }

        @keyframes float {
          100% {
            transform: translateY(20px);
          }
        }
        @media (max-width: 450px) {
          svg {
            position: absolute;
            top: 50%;
            left: 50%;
            margin-top: -250px;
            margin-left: -190px;
          }
          .message-box {
            top: 50%;
            left: 50%;
            margin-top: -100px;
            margin-left: -190px;
            text-align: center;
          }
        }
        .navbar {
          position: fixed;
          display: inline-block;
          top: 0;
          left: 0;
          right: 0;
          z-index: 9999;
          height: 60px;
          width: 100%;
          background: #bbb;
          padding: 10px 20px;
          float: none;
        }

        ul {
          list-style-type: none;
          padding: 0;
        }

        li {
          float: right;
          margin: 0px 10px;
        }


        /* End of Navbar CSS */


        /* Welcome Page */

        #welcome-page {
          background-attachment: fixed;
          background-position: center;
          background-size: cover;
        }

        #welcome-text {
          text-align: center;
        }

        .block {
          background: rgba(128, 128, 128, 128);
          border: #FFF 20px double;
          border-radius: 10px;
          color: #FFG;
          display: inline-block;
          font-size: 60px;
          font-weight: 800;
          padding: 0 10px 7px;
          margin: 250px;
          text-align: center;
        }


        /* End of Welcome Page */

        #aboutme {
          background-size: cover;
          background: #d3d9d9;
          background-attachment: fixed;
          background-position: center;
          height: 700px;
        }

        #portfolio {
          background-size: cover;
          background-attachment: fixed;
          background-position: center;
          height: 700px;
        }

        #footer {
          text-align: center;
          background-size: cover;
          background-attachment: fixed;
          background-position: center;
          height: 250px;
          padding: 20px;
        }

        .fs {
          font-size: 3em;
        }

        .img {
          margin: 60px 20px;
          border-radius: 50%;
          height: 550px;
          display: inline-block;
          transform: scale(-1, 1);
          -webkit-transform: scale(-1, 1);
          -moz-transform: scale(-1, 1);
          -o-transform: scale(-1, 1);
        }

        .title {
          display: inline-block;
          background-color: grey;
          border: #AAA 5px double;
          border-radius: 10px;
          color: blue;
          padding-left: 40px;
          padding-right: 40px;
          text-shadow: 2px 2px 5px #000;
          font-size: 30px;
        }

        .icon-btn {
          margin: 0 20px;
        }
    </style>
  </head>
  <body>
    <svg width="380px" height="500px" viewBox="0 0 837 1045" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
          <path d="M353,9 L626.664028,170 L626.664028,487 L353,642 L79.3359724,487 L79.3359724,170 L353,9 Z" id="Polygon-1" stroke="#007FB2" stroke-width="6" sketch:type="MSShapeGroup"></path>
          <path d="M78.5,529 L147,569.186414 L147,648.311216 L78.5,687 L10,648.311216 L10,569.186414 L78.5,529 Z" id="Polygon-2" stroke="#EF4A5B" stroke-width="6" sketch:type="MSShapeGroup"></path>
          <path d="M773,186 L827,217.538705 L827,279.636651 L773,310 L719,279.636651 L719,217.538705 L773,186 Z" id="Polygon-3" stroke="#795D9C" stroke-width="6" sketch:type="MSShapeGroup"></path>
          <path d="M639,529 L773,607.846761 L773,763.091627 L639,839 L505,763.091627 L505,607.846761 L639,529 Z" id="Polygon-4" stroke="#F2773F" stroke-width="6" sketch:type="MSShapeGroup"></path>
          <path d="M281,801 L383,861.025276 L383,979.21169 L281,1037 L179,979.21169 L179,861.025276 L281,801 Z" id="Polygon-5" stroke="#36B455" stroke-width="6" sketch:type="MSShapeGroup"></path>
      </g>
    </svg>
    <div class="message-box">
      <h1>Pekmez<br>Simple<br>Web<br>Server</h1>
      <p id="app"></p>
      <div class="buttons-con">
        <div class="action-link-wrap">
        </div>
      </div>
    </div>
    <script src="/js/dependencies/socket.io.js"></script>
    <!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js">  </script> -->
    <script>

      var socket;
      var pekmez = {
        connection: function(url){
          var reconnectAttemp = 0;
          document.getElementById("app").innerHTML = "Session Id : " + getCookie("pekmezsession");
          socket = io(url+'?type=browser&version=1.0.0',{transportOptions: {polling: {extraHeaders: {'x-clientid': getCookie("pekmezsession")}}}, reconnection : true,autoConnect :true,query:"newtest"});
          
          socket.on('connect', () => {
          });
          
          socket.on('reconnect', () => {
            reconnectAttemp = 0;
            console.log("reconnected"); 
          });

          socket.on('reconnect_attempt', () => {
            reconnectAttemp++;
            console.log("reconnected attemp "+ reconnectAttemp); 
          });
          
          socket.on('greetings', function (data) {
            console.log(data);
          });    
        },
        post: function(url,data,callback){
          var postData = {};
          postData.url = url;
          postData.method = "post";
          postData.data = data;
          socket.on("post"+url,function(data){
            callback(data.data);
          });
          socket.emit("post",postData);
        },
        get: function(url){
          var getData = {};
          getData.url = url;
          getData.method = "get";
          socket.emit("get",getData);
        }
      }

      pekmez.connection("http://localhost:7777");
      pekmez.post("/new",{"userId":1},function(data){
        console.log(data);
      });
      pekmez.get("/new");

      // $(document).ready(function(){
      //     $.post("http://localhost:7777/user",{user: "asdasd",password: "pass"}, function(data){
      //           console.log(data);
      //     });
      // });

    </script>
  </body>

</html>